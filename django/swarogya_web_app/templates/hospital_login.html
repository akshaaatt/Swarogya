{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	  <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
<!--===============================================================================================-->
<link rel="icon" type="image/x-icon" href="/favicon.ico">

	<title>Swarogya</title>

<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'fonts/Linearicons-Free-v1.0.0/icon-font.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/animate/animate.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/animsition/css/animsition.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/select2/select2.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/daterangepicker/daterangepicker.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'css/util.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
<!--===============================================================================================-->
<style>
	body {
	background-image: url(' /static/img/Medical.png');

	/* Full height */
	height: 100%;
	width: 100%;

	/* Center and scale the image nicely */
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	}
</style>

</head>


<body>

	<div class="limiter">
			<div class="container-login100">
				<div class="wrap-login100">
					<div class="login100-form-title" style="background-image: url('{% static 'img/my_hospital.jpeg' %}');  width: 100%;height: 250px; text-align: center;;">
						<span class="login100-form-title-1" style="margin: 30px ;">
							Hospital Login
						</span>
					</div>

	        <form class="login100-form validate-form" name="myForm" action="javascript:login()">


						<div class="wrap-input100 validate-input m-b-26" data-validate="Email is required">
							<span class="label-input100">Email</span>
							<input class="input100" type="email" name="email_field" id="email_field"placeholder="Enter Email" autocomplete="on" required>
							<span class="focus-input100"></span>
						</div>


						<div class="wrap-input100 validate-input m-b-18" data-validate = "Password is required">
							<span class="label-input100">Password</span>
							<input class="input100" type="password"  name="password_field" id="password_field" placeholder="Enter password" autocomplete="on" required>
							<span class="focus-input100"></span>
						</div>
						<br>
						<center>
							<button type="submit" class="login100-form-btn" style="color:white;width:200px;background-color:#006699;box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);margin:0px 0px;">
								Login
							</button>
					</center>

					</form>

				<br>
				<center>		<hr style="width:80%;margin-center:0;height:1px;border-width:0;color:black;background-color:black">
					<h5>	Want to Register or Login as Hospital Admin</h5><br>
						<button class="btn btn--secondary" onclick="document.location='{% url 'swarogya_web:hospital_registration' %}'" style="color:white;background-color:#006699;box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);margin:2px 40px;">Hospital Registration</button>

							<button class="btn btn--secondary" onclick="document.location='{% url 'swarogya_web:staff_login' %}'" style="color:white;background-color:#006699;box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);margin:2px 40px;">Health Professional Login</button>
						</center>
						<br>

					<br>

				</div>
			</div>
		</div>
<!--===============================================================================================-->
	<script src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/animsition/js/animsition.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/select2/select2.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/daterangepicker/moment.min.js' %}"></script>
	<script src="{% static 'vendor/daterangepicker/daterangepicker.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/countdowntime/countdowntime.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'js/main.js' %}"></script>

	<!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-analytics.js"></script>

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCQ3q94q3HSYsrc8TvvQcgysw5Y7YFRMqg",
      authDomain: "swarogya-aa30d.firebaseapp.com",
      databaseURL: "https://swarogya-aa30d.firebaseio.com",
      projectId: "swarogya-aa30d",
      storageBucket: "swarogya-aa30d.appspot.com",
      messagingSenderId: "819552361415",
      appId: "1:819552361415:web:5c22d654f938c1403697e2",
      measurementId: "G-3MEWE6QZGV"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
		</script>

	<script>
	$(document).bind("contextmenu",function(e) {
		 e.preventDefault();
		});
		$(document).keydown(function(e){
				if(e.which === 123){
					 return false;
				}
		});
	firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.

    var user = firebase.auth().currentUser;

    if(user != null){

			$.ajax({
				url: "{% url 'swarogya_web:get_user_email' %}",
				data: {
					'user_email': user.email,
					'user_uid' : user.uid,
				},
				dataType: 'json',
				success: function (data) {
					if (data['admin'] == 'yes'){
							alert('welcome '+ user.email);
						window.localStorage.setItem('hospitaladminName', data['hospitalName']);
						window.location.assign("{% url 'swarogya_web:staff_registration'%}");
					}
					else{
						firebase.auth().signOut();
						alert('You dont have Admin Rights');
					}
				},
			});
    }
  }
});

function login(){

  var userEmail = document.getElementById("email_field").value;
  var userPass = document.getElementById("password_field").value;

  firebase.auth().signInWithEmailAndPassword(userEmail, userPass).catch(function(error) {
    // Handle Errors here.
    var errorCode = error.code;
    var errorMessage = error.message;

		if (errorCode === 'auth/wrong-password') {
				alert('Wrong password.');
			} else {
				alert(errorMessage);
			}
  });

}
function forgetPassword()
{
	//firebase.auth().sendPassResetEmail
}
</script>


</body>
</html>
